:root{
  --scale: 1;                        /* JS에서 주입 */
  --accent:#FFE64D;

  /* 상세뷰에서만 쓸 글래스 강도/틴트 */
  --glass-blur: 10px;
  --glass-sat: 160%;
  --glass-tint: rgba(5,5,56,.35);
  --glass-border: rgba(255,255,255,.15);
}

/* 스크롤 금지 */
html, body{
  height:100%;
  margin:0;
  background:#05014A;
  overflow:hidden;
}

/* ===== 고정 헤더: 기본(메인뷰)에서는 '완전 투명 + 효과 없음' ===== */
#glass-header{
  position:fixed; z-index:1000;
  top:0; left:0; right:0; width:100vw;
  height: calc(200px * var(--scale));
  display:flex; align-items:center; justify-content:center;

  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: transparent;
  border-bottom: 1px solid transparent;
}

/* ✅ 상세뷰일 때만 글래스 효과/틴트 적용 */
body.detail-open #glass-header{
  backdrop-filter: blur(calc(var(--glass-blur)*var(--scale))) saturate(var(--glass-sat));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur)*var(--scale))) saturate(var(--glass-sat));
  background: var(--glass-tint);
  border-bottom: 1px solid var(--glass-border);
  background-color: rgba(255, 255, 255, 0);
}

/* ===== 클릭 가능한 이미지 버튼 hover 효과 (중앙 확대) ===== */
#scene image[id$="-btn"] {
  transition: transform 0.25s ease, filter 0.25s ease;
  transform-origin: center center; /* ← 확대 기준을 정중앙으로 설정 */
  transform-box: fill-box;           /* 각 이미지 자체 박스를 기준으로 함 */
  cursor: pointer;
}

#scene image[id$="-btn"]:hover, #scene image[id$="-btn"].hovered {
  transform: scale(1.5);
  filter: brightness(1.1) drop-shadow(0 0 10px rgba(255,255,200,0.4));
}


/* 타이틀/아이콘 (비율 좌표) */
#title-img{
  height: calc(135px * var(--scale));
  width:auto; object-fit:contain; user-select:none;
}
#back-btn-img, #question-btn-img{
  position:absolute;
  top:    calc(41px * var(--scale));
  bottom: calc(24px * var(--scale));
  width:  calc(135px * var(--scale));
  height: calc(135px * var(--scale));
  object-fit:contain; user-select:none; cursor:pointer;
}
#back-btn-img{ left:  calc(70px * var(--scale)); display:none; }
#question-btn-img{ right: calc(70px * var(--scale)); }

/* ===== 콘텐츠(메인 지도) — 화면 전체, 헤더 뒤에도 깔림 ===== */
#viewport{
  position:fixed; inset:0;
  display:grid; place-items:center;
  overflow:hidden;
}
/* 3840×2160 기준 스테이지 비율 스케일 */
#app{
  width:  calc(3840px * var(--scale));
  height: calc(2160px * var(--scale));
  position:relative; overflow:hidden;
}
#stage{ position:relative; width:100%; height:100%; overflow:hidden; }
#scene{ width:100%; height:100%; display:block; background:#05014A; }

/* ===== 파노라마(상세) 뷰 — 화면 전체 덮기, 헤더 아래 레이어 ===== */
#alt-view{
  position:fixed; z-index:500;
  inset:0;
  background: rgba(0,0,0,.55);
  display:flex; justify-content:center; align-items:center;
  opacity:0; pointer-events:none; transition:opacity .25s ease;
}
#alt-view.active{ opacity:1; pointer-events:auto; }

/* ===== 제스처: 카메라/커서 (UI 최소 침범로 배치) ===== */
#cam{
  position: fixed; right:16px; bottom:16px;
  width:240px; height:180px; object-fit:cover;
  border-radius:12px; border:1px solid #3a3a6a;
  opacity:.75; background:#000; z-index:1200;
}
#cursor{
  position: fixed; z-index: 2000;
  width:24px; height:24px; border-radius:50%;
  background: rgba(0,150,255,0.8);
  pointer-events:none; transform: translate(-50%,-50%);
  transition: transform .15s ease, background .15s ease, box-shadow .15s ease;
}
#cursor.clicking{
  background: rgba(255,60,60,.95) !important;
  transform: translate(-50%,-50%) scale(.72);
  box-shadow:0 0 0 6px rgba(255,60,60,.25);
}

/* 접근성 숨김(상태 디버그용 요소가 필요할 때) */
.sr-only{ position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); }

/* 맵 패닝 시 약간의 반응 피드백(선택) */
/* body.yaw-active #scene{ outline: 2px solid rgba(255,255,255,.06); outline-offset:-2px; } */

@media (max-width:640px){
  #cam { width:160px; height:120px; }
}
